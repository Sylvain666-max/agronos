{% extends 'base.html' %}
{% block title %}Accueil - AgroPlateforme{% endblock %}

{% block content %}
{% load static %}

<!-- Hero Section -->
<section class="py-5 bg-success-subtle">
  <div class="container text-center text-md-start">
    <h1 class="display-4 fw-bold text-success">Agronomie, Élevage & Incubateurs</h1>
    <p class="lead col-md-7 text-muted">Conseils, formations, matériels d'élevage, fabrication d'incubateurs, installation de fermes et plus.</p>
    <a href="/shop/" class="btn btn-success btn-lg shadow-sm mt-3">Découvrir la boutique</a>
  </div>
</section>

<!-- Produits Populaires -->
<section class="py-5">
  <h2 class="h3 mb-4 text-center text-success">Produits populaires</h2>
  <div class="row g-4">
    {% for product in products %}
    <div class="col-6 col-md-3">
      <div class="card h-100 shadow-sm border-0 hover-shadow">
        {% if product.image %}
        <img src="{{ product.image.url }}" class="card-img-top" alt="{{ product.name }}">
        {% else %}
        <img src="{% static 'img/product_placeholder.jpg' %}" class="card-img-top" alt="Produit">
        {% endif %}
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">{{ product.name }}</h5>
          <p class="card-text fw-bold text-success mb-3">{{ product.price }} FCFA</p>
          <a href="{{ product.get_absolute_url }}" class="btn btn-outline-success mt-auto">Voir</a>
        </div>
      </div>
    </div>
    {% empty %}
    <p class="text-center">Aucun produit pour le moment.</p>
    {% endfor %}
  </div>
</section>

<hr class="my-5"/>

<!-- Derniers articles -->
<section class="py-5 bg-light">
  <h2 class="h3 mb-4 text-center text-primary">Derniers articles</h2>
  <div class="row g-4">
    {% for post in posts %}
    <div class="col-md-4">
      <div class="card h-100 shadow-sm border-0 hover-shadow">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">
            <a href="{{ post.get_absolute_url }}" class="text-decoration-none text-dark">{{ post.title }}</a>
          </h5>
          <p class="text-muted small">
            {% if post.category %} {{ post.category.name }} {% endif %}
          </p>
          <p class="card-text">{{ post.excerpt|default:post.content|truncatechars:120 }}</p>
          <a href="{{ post.get_absolute_url }}" class="btn btn-outline-primary mt-auto">Lire</a>
        </div>
      </div>
    </div>
    {% empty %}
    <p class="text-center">Aucun article pour le moment.</p>
    {% endfor %}
  </div>
</section>

<hr class="my-5"/>

<!-- Services -->
<section class="py-5">
  <h2 class="h3 mb-4 text-center text-secondary">Nos services</h2>
  <div class="row g-4">
    {% for s in services %}
    <div class="col-md-4">
      <div class="card h-100 shadow-sm border-0 hover-shadow">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">
            <a href="{{ s.get_absolute_url }}" class="text-decoration-none text-dark">{{ s.name }}</a>
          </h5>
          <p class="card-text">{{ s.short_description|default:s.description|truncatechars:120 }}</p>
          <a href="{{ s.get_absolute_url }}" class="btn btn-outline-secondary mt-auto">Voir le service</a>
        </div>
      </div>
    </div>
    {% empty %}
    <p class="text-center">Les services arrivent très bientôt.</p>
    {% endfor %}
  </div>
</section>

{% endblock %}
